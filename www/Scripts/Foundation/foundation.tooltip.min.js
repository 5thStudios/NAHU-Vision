(function(n,t){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:200,fade_in_duration:150,fade_out_duration:150,show_on:"all",tip_template:function(n,t){return'<span data-selector="'+n+'" id="'+n+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+t+'<span class="nub"><\/span><\/span>'}},cache:{},init:function(n,t,i){Foundation.inherit(this,"random_str");this.bindings(t,i)},should_show:function(t){var i=n.extend({},this.settings,this.data_options(t));return i.show_on==="all"?!0:this.small()&&i.show_on==="small"||this.medium()&&i.show_on==="medium"||this.large()&&i.show_on==="large"?!0:!1},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(t){function f(n,t,r){n.timer||(r?(n.timer=null,i.showTip(t)):n.timer=setTimeout(function(){n.timer=null;i.showTip(t)}.bind(n),i.settings.hover_delay))}function u(n,t){n.timer&&(clearTimeout(n.timer),n.timer=null);i.hide(t)}var i=this,r=i.S;i.create(this.S(t));n(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(t){var e=r(this),o=n.extend({},i.settings,i.data_options(e)),h=!1,s;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type)&&r(t.target).is("a")||/mouse/i.test(t.type)&&i.ie_touch(t))return!1;if(e.hasClass("open"))Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type)&&t.preventDefault(),i.hide(e);else{if(o.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type))return;!o.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(t.type)&&(t.preventDefault(),r(o.tooltip_class+".open").hide(),h=!0,n(".open["+i.attr_name()+"]").length>0&&(s=r(n(".open["+i.attr_name()+"]")[0]),i.hide(s)));/enter|over/i.test(t.type)?f(this,e):t.type==="mouseout"||t.type==="mouseleave"?u(this,e):f(this,e,!0)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(t){if(/mouse/i.test(t.type)&&i.ie_touch(t))return!1;(n(this).data("tooltip-open-event-type")!="touch"||t.type!="mouseleave")&&(n(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(t.type)?i.convert_to_touch(n(this)):u(this,n(this)))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(){u(this,r(this))})},ie_touch:function(){return!1},showTip:function(n){var t=this.getTip(n);if(this.should_show(n,t))return this.show(n)},getTip:function(t){var r=this.selector(t),u=n.extend({},this.settings,this.data_options(t)),i=null;return r&&(i=this.S('span[data-selector="'+r+'"]'+u.tooltip_class)),typeof i=="object"?i:!1},selector:function(n){var t=n.attr(this.attr_name())||n.attr("data-selector");return typeof t!="string"&&(t=this.random_str(6),n.attr("data-selector",t).attr("aria-describedby",t)),t},create:function(i){var o=this,r=n.extend({},this.settings,this.data_options(i)),f=this.settings.tip_template,u,e;if(typeof r.tip_template=="string"&&t.hasOwnProperty(r.tip_template)&&(f=t[r.tip_template]),u=n(f(this.selector(i),n("<div><\/div>").html(i.attr("title")).html())),e=this.inheritable_classes(i),u.addClass(e).appendTo(r.append_to),Modernizr.touch){u.append('<span class="tap-to-close">'+r.touch_close_text+"<\/span>");u.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(){o.hide(i)})}i.removeAttr("title").attr("title","")},reposition:function(t,i,r){var l,u,h,a,f,c;i.css("visibility","hidden").show();l=t.data("width");u=i.children(".nub");h=u.outerHeight();a=u.outerWidth();this.small()?i.css({width:"100%"}):i.css({width:l?l:"auto"});f=function(n,t,i,r,u){return n.css({top:t?t:"auto",bottom:r?r:"auto",left:u?u:"auto",right:i?i:"auto"}).end()};var o=t.offset().top,e=t.offset().left,s=t.outerHeight();f(i,o+s+10,"auto","auto",e);this.small()?(f(i,o+s+10,"auto","auto",12.5,n(this.scope).width()),i.addClass("tip-override"),f(u,-h,"auto","auto",e)):(Foundation.rtl&&(u.addClass("rtl"),e=e+t.outerWidth()-i.outerWidth()),f(i,o+s+10,"auto","auto",e),u.attr("style")&&u.removeAttr("style"),i.removeClass("tip-override"),c=i.outerHeight(),r&&r.indexOf("tip-top")>-1?(Foundation.rtl&&u.addClass("rtl"),f(i,o-c,"auto","auto",e).removeClass("tip-override")):r&&r.indexOf("tip-left")>-1?(f(i,o+s/2-c/2,"auto","auto",e-i.outerWidth()-h).removeClass("tip-override"),u.removeClass("rtl")):r&&r.indexOf("tip-right")>-1&&(f(i,o+s/2-c/2,"auto","auto",e+t.outerWidth()+h).removeClass("tip-override"),u.removeClass("rtl")));i.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(t){var r=n.extend({},this.settings,this.data_options(t)),u=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(r.additional_inheritable_classes),i=t.attr("class"),f=i?n.map(i.split(" "),function(t){if(n.inArray(t,u)!==-1)return t}).join(" "):"";return n.trim(f)},convert_to_touch:function(t){var i=this,r=i.getTip(t),u=n.extend({},i.settings,i.data_options(t));if(r.find(".tap-to-close").length===0){r.append('<span class="tap-to-close">'+u.touch_close_text+"<\/span>");r.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(){i.hide(t)})}t.data("tooltip-open-event-type","touch")},show:function(n){var t=this.getTip(n);n.data("tooltip-open-event-type")=="touch"&&this.convert_to_touch(n);this.reposition(n,t,n.attr("class"));n.addClass("open");t.fadeIn(this.settings.fade_in_duration)},hide:function(n){var t=this.getTip(n);t.fadeOut(this.settings.fade_out_duration,function(){t.find(".tap-to-close").remove();t.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");n.removeClass("open")})},off:function(){var t=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(i){n("["+t.attr_name()+"]").eq(i).attr("title",n(this).text())}).remove()},reflow:function(){}}})(jQuery,window,window.document);